"use strict";(self.webpackChunkhalo_documentation=self.webpackChunkhalo_documentation||[]).push([[9042],{28453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>l});var d=s(96540);const r={},n=d.createContext(r);function i(e){const t=d.useContext(n);return d.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),d.createElement(n.Provider,{value:t},e.children)}},77523:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"documentations/adaptor/installation","title":"Installation","description":"The Halo Dot Adaptor is offered as a Helm chart that can be installed into a client\'s existing Kubernetes orchestrator. The high-level process is as follows:","source":"@site/versioned_docs/version-2.1/documentations/adaptor/01 - installation.md","sourceDirName":"documentations/adaptor","slug":"/documentations/adaptor/installation","permalink":"/docs/versioned_docs/version-2.1/documentations/adaptor/installation","draft":false,"unlisted":false,"tags":[],"version":"2.1","sidebarPosition":1,"frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"The Adaptor","permalink":"/docs/versioned_docs/version-2.1/category/the-adaptor"},"next":{"title":"Bootstrapping","permalink":"/docs/versioned_docs/version-2.1/documentations/adaptor/bootstrapping"}}');var r=s(74848),n=s(28453);const i={},l="Installation",c={},a=[{value:"Helm Chart Installation",id:"helm-chart-installation",level:2},{value:"Adaptor Chart Values",id:"adaptor-chart-values",level:2}];function o(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"installation",children:"Installation"})}),"\n",(0,r.jsx)(t.p,{children:"The Halo Dot Adaptor is offered as a Helm chart that can be installed into a client's existing Kubernetes orchestrator. The high-level process is as follows:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Install ",(0,r.jsx)(t.code,{children:"adaptor"})," chart to set up necessary components"]}),"\n",(0,r.jsxs)(t.li,{children:["Install ",(0,r.jsx)(t.code,{children:"adaptor-bootstrap"})," chart to perform necessary bootstrapping actions. This chart runs a single Kubernetes Job to bootstrap the adaptor. Once the process has completed, the bootstrap Helm deployment can be uninstalled"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"helm-chart-installation",children:"Helm Chart Installation"}),"\n",(0,r.jsx)(t.p,{children:"All Halo Dot helm charts are available in a repo hosted on Github. To install the helm charts, please run the following commands:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Add helm repo"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"helm repo add halodot  https://halo-dot.github.io/helm-charts \n"})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsx)(t.li,{children:"Install adaptor chart"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"helm install adaptor halodot/halo-adaptor --values config.yaml --values secrets.yaml\n"})}),"\n",(0,r.jsx)(t.p,{children:"In the command above, 2 values files are provided as input."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"config.yaml contains the mandatory config values that are not sensitive"}),"\n",(0,r.jsxs)(t.li,{children:["secrets.yaml contains the config values that are sensitive. We recommend storing an encrypted version of this file (using a tool such as ",(0,r.jsx)("a",{href:"https://github.com/getsops/sops",children:"SOPS"}),") and then decrypting it at the time the command is executed."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"adaptor-chart-values",children:"Adaptor Chart Values"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Key"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required/Optional"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Default"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"aws.accessKeyId"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"AWS Access Key ID"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"aws.secretAccessKey"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"AWS Secret Access Key (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"aws.sessionToken"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"AWS Session Token (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"aws.region"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"AWS Region"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"database.host"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Hostname of database server"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"database.port"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Port of database server"}),(0,r.jsx)(t.td,{children:"5432"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"database.user"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Username to connect to database"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"database.password"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Password to connect to database (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"database.databaseName"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Name of the database within the database server"}),(0,r.jsx)(t.td,{children:"halo"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"redis.host"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Hostname of Redis server"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"redis.port"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Port of Redis server"}),(0,r.jsx)(t.td,{children:"6379"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"redis.user"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Username to connect to Redis"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"redis.password"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Password to connect to Redis (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"attestation.host"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"Host URL of the attestation service"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://kernelserver.go.dev.haloplus.io",children:"https://kernelserver.go.dev.haloplus.io"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"attestation.apiKey"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"API key for the attestation service (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"keys.messageSigning"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"AWS Key used to sign messages"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"keys.dbIntegrity"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"AWS Key used to sign database records"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"keys.dbEncryptionKey"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"AWS Key used to encrypt sensitive database records"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"keys.logIntegrityKey"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Required"}),(0,r.jsx)(t.td,{children:"AWS Key used to sign audit log messages"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.namespace"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Kubernetes namespace for the adaptor"}),(0,r.jsx)(t.td,{children:"halo"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.name"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Name of the adaptor service"}),(0,r.jsx)(t.td,{children:"adaptor"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.replicaCount"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Number of replicas for the adaptor service"}),(0,r.jsx)(t.td,{children:"1"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.image.repository"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Docker repository for the adaptor image"}),(0,r.jsx)(t.td,{children:"459295082152.dkr.ecr.eu-west-1.amazonaws.com/halo-adaptor-server"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.image.tag"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Tag for the adaptor image"}),(0,r.jsx)(t.td,{children:"latest"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.image.pullPolicy"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Image pull policy"}),(0,r.jsx)(t.td,{children:"Always"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.service.targetPort"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Target port for the adaptor service"}),(0,r.jsx)(t.td,{children:"9000"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.service.listeningPort"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Listening port for the adaptor service"}),(0,r.jsx)(t.td,{children:"80"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.probes.startup.initialDelaySeconds"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Initial delay before startup probe is initiated"}),(0,r.jsx)(t.td,{children:"60"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.probes.startup.periodSeconds"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Period between startup probe checks"}),(0,r.jsx)(t.td,{children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.probes.startup.timeoutSeconds"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Timeout for each startup probe check"}),(0,r.jsx)(t.td,{children:"5"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.probes.startup.successThreshold"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Number of successful checks before considering the startup probe successful"}),(0,r.jsx)(t.td,{children:"1"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.probes.startup.failureThreshold"})}),(0,r.jsx)(t.td,{children:"int"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Number of failed checks before considering the startup probe failed"}),(0,r.jsx)(t.td,{children:"100"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.logLevel"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Log level for the adaptor service"}),(0,r.jsx)(t.td,{children:"LogInfo"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.resources.limits.cpu"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"CPU limit for the adaptor service"}),(0,r.jsx)(t.td,{children:"100m"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.resources.limits.memory"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Memory limit for the adaptor service"}),(0,r.jsx)(t.td,{children:"256Mi"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.resources.requests.cpu"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"CPU request for the adaptor service"}),(0,r.jsx)(t.td,{children:"100m"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.resources.requests.memory"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Memory request for the adaptor service"}),(0,r.jsx)(t.td,{children:"256Mi"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.tls.enabled"})}),(0,r.jsx)(t.td,{children:"bool"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Enable TLS for the adaptor service"}),(0,r.jsx)(t.td,{children:"false"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.tls.cert"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"TLS certificate"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.tls.key"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"TLS private key (sensitive)"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.tls.ca"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"TLS CA certificate"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"adaptor.tls.passphrase"})}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Optional"}),(0,r.jsx)(t.td,{children:"Passphrase for the TLS private key (sensitive)"}),(0,r.jsx)(t.td,{})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);