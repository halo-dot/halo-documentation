"use strict";(self.webpackChunkhalo_documentation=self.webpackChunkhalo_documentation||[]).push([[8548],{28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>o});var s=r(96540);const i={},t=s.createContext(i);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:n},e.children)}},97840:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"documentations/adaptor/adaptor","title":"Halo Dot Adaptor Setup Guide","description":"Overview","source":"@site/docs/documentations/adaptor/01 - adaptor.md","sourceDirName":"documentations/adaptor","slug":"/documentations/adaptor/adaptor","permalink":"/docs/documentations/adaptor/adaptor","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"Quick start","permalink":"/docs/documentations/adaptor/quickstart"},"next":{"title":"Halo Dot Adaptor Bootstrapping Guide","permalink":"/docs/documentations/adaptor/bootstrapping"}}');var i=r(74848),t=r(28453);const d={},o="Halo Dot Adaptor Setup Guide",l={},a=[{value:"Overview",id:"overview",level:2},{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Component Responsibilities",id:"component-responsibilities",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Infrastructure Requirements",id:"infrastructure-requirements",level:3},{value:"Kubernetes Cluster",id:"kubernetes-cluster",level:4},{value:"PostgreSQL Database",id:"postgresql-database",level:4},{value:"Redis",id:"redis",level:4},{value:"Hardware Security Module",id:"hardware-security-module",level:4},{value:"AWS Requirements",id:"aws-requirements",level:3},{value:"Network Requirements",id:"network-requirements",level:3},{value:"Access Requirements",id:"access-requirements",level:3},{value:"Installation Steps",id:"installation-steps",level:2},{value:"Step 1: Configure Database and Redis",id:"step-1-configure-database-and-redis",level:3},{value:"Step 2: Add Helm Repository",id:"step-2-add-helm-repository",level:3},{value:"Step 3: Create Values Configuration",id:"step-3-create-values-configuration",level:3},{value:"Step 4: Deploy the Adaptor",id:"step-4-deploy-the-adaptor",level:3},{value:"Step 5: Verify Deployment",id:"step-5-verify-deployment",level:3},{value:"Post-Installation Configuration",id:"post-installation-configuration",level:2},{value:"Run the Bootstrapping Job",id:"run-the-bootstrapping-job",level:3},{value:"Provide Halo Dot with your JWT issuer name and public key",id:"provide-halo-dot-with-your-jwt-issuer-name-and-public-key",level:3},{value:"Configure Ingress for External Access",id:"configure-ingress-for-external-access",level:3},{value:"SoftPOS Integration",id:"softpos-integration",level:2},{value:"SDK JWT Configuration",id:"sdk-jwt-configuration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Initial Deployment Issues",id:"initial-deployment-issues",level:3},{value:"Adaptor Fails to Start",id:"adaptor-fails-to-start",level:4},{value:"Secret Creation Failures",id:"secret-creation-failures",level:4},{value:"Readiness Probe Failures",id:"readiness-probe-failures",level:4},{value:"Maintenance",id:"maintenance",level:2},{value:"Upgrade Process",id:"upgrade-process",level:3},{value:"Support",id:"support",level:2},{value:"Helm values",id:"helm-values",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"halo-dot-adaptor-setup-guide",children:"Halo Dot Adaptor Setup Guide"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Halo Dot is a Software Point of Sale (SoftPOS) provider that enables secure payment acceptance on\nmobile devices. The Halo Dot Adaptor is a self-hosted service that allows you to process SoftPOS\npayments within your own infrastructure while maintaining the security and compliance benefits of\nthe Halo Dot platform."}),"\n",(0,i.jsx)(n.p,{children:"By deploying the Adaptor in your environment, you gain full control over payment data flow and\ncustomer information and direct integration with your existing payment infrastructure."}),"\n",(0,i.jsx)(n.p,{children:"The Adaptor maintains a secure connection to Halo Dot's attestation and monitoring (A&M) service to\nensure device security and compliance while processing payments locally."}),"\n",(0,i.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Adaptor deployment creates a secure payment processing environment within your infrastructure:"}),"\n",(0,i.jsx)(n.mermaid,{value:"architecture-beta\n    group halo(cloud)[Halo Dot Backend]\n    group client(cloud)[Your Backend]\n    group outside\n    service am(server)[Halo Dot Attestation Service] in halo\n    service adaptor(server)[Adaptor] in client\n    service paymentprovider(server)[Halo Dot Payment Provider] in client\n    service paymentswitch(server)[Your Payment Switch] in client\n    service hsmService(server)[HSM Service] in client\n    service hsm(server)[HSM] in client\n    service sdk(internet)[Halo Dot SDK] in outside\n    adaptor:R -- L:am\n    adaptor:L -- R:paymentprovider\n    paymentprovider:L -- R:paymentswitch\n    paymentprovider:T -- B:hsmService\n    adaptor:L -- R:hsmService\n    hsm:R -- L:hsmService\n    sdk:B -- T:adaptor\n    sdk:B -- T:am"}),"\n",(0,i.jsx)(n.h3,{id:"component-responsibilities",children:"Component Responsibilities"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Adaptor Service"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Processes payment requests from SoftPOS devices"}),"\n",(0,i.jsx)(n.li,{children:"Manages secure key generation and storage"}),"\n",(0,i.jsx)(n.li,{children:"Handles device attestation verification"}),"\n",(0,i.jsx)(n.li,{children:"Orchestrates transaction flow"}),"\n",(0,i.jsx)(n.li,{children:"Health checks include verification of A&M server connectivity"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Payment Provider"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Translates between Halo Dot protocol and your payment switch"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"HSM Service"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Provides cryptographic operations for payment processing"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Attestation & Monitoring (Halo Dot)"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verifies device integrity and security"}),"\n",(0,i.jsx)(n.li,{children:"Monitors for security threats"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.h3,{id:"infrastructure-requirements",children:"Infrastructure Requirements"}),"\n",(0,i.jsx)(n.h4,{id:"kubernetes-cluster",children:"Kubernetes Cluster"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Version"}),": 1.24 or higher"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nodes"}),": Minimum 3 nodes for production high availability"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resources"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Minimum 4 vCPU and 8GB RAM available for Halo Dot services"}),"\n",(0,i.jsx)(n.li,{children:"Additional capacity for traffic spikes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"postgresql-database",children:"PostgreSQL Database"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Version"}),": 13 or higher"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SSL/TLS enabled (required for PCI compliance)"}),"\n",(0,i.jsx)(n.li,{children:"Connection pooling recommended"}),"\n",(0,i.jsx)(n.li,{children:"Backup strategy in place"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"redis",children:"Redis"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Version"}),": 6.2 or higher"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Session management, caching, and temporary transaction data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Authentication enabled"}),"\n",(0,i.jsx)(n.li,{children:"Persistence configured (AOF or RDB)"}),"\n",(0,i.jsx)(n.li,{children:"Memory limits set appropriately"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"hardware-security-module",children:"Hardware Security Module"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Supported"}),": Thales PayShield 10K"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Network"}),": Accessible from Kubernetes cluster"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),": Pre-configured with required LMKs"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"aws-requirements",children:"AWS Requirements"}),"\n",(0,i.jsx)(n.p,{children:"The Adaptor automatically provisions its own KMS keys and secrets. You need:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"IAM Role/User"})," with the following permissions:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Action": [\n        "kms:CreateKey",\n        "kms:CreateAlias",\n        "kms:DescribeKey",\n        "kms:GenerateDataKey",\n        "kms:Decrypt"\n      ],\n      "Resource": "*"\n    },\n    {\n      "Effect": "Allow",\n      "Action": [\n        "secretsmanager:CreateSecret",\n        "secretsmanager:GetSecretValue",\n        "secretsmanager:DescribeSecret",\n        "secretsmanager:UpdateSecret"\n      ],\n      "Resource": "arn:aws:secretsmanager:*:*:secret:halo-*"\n    }\n  ]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"network-requirements",children:"Network Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Outbound HTTPS (443)"})," to:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Halo Dot A&M service (will be provided)"}),"\n",(0,i.jsx)(n.li,{children:"AWS KMS and Secrets Manager endpoints"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Inbound HTTPS (443)"})," from:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Your SoftPOS mobile applications"}),"\n",(0,i.jsx)(n.li,{children:"Your monitoring/operations tools"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"access-requirements",children:"Access Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Container Registry"}),": Credentials for Halo Dot private registry"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Halo Dot Tenant ID"}),": Provided during onboarding"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A&M Service Endpoint"}),": Provided during onboarding"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Helm 3.x"}),": Installed on deployment machine"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-configure-database-and-redis",children:"Step 1: Configure Database and Redis"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create PostgreSQL database"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE halodot_adaptor;\nCREATE USER halodot_user WITH ENCRYPTED PASSWORD '<secure-password>';\nGRANT ALL PRIVILEGES ON DATABASE halodot_adaptor TO halodot_user;\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify Redis authentication"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"redis-cli -h <redis-host> -a <redis-password> ping\n# Should return: PONG\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-add-helm-repository",children:"Step 2: Add Helm Repository"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm repo add halodot https://halo-dot.github.io/helm-charts\nhelm repo update\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-create-values-configuration",children:"Step 3: Create Values Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"values.yaml"})," file tailored to your environment:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Version provided by Halo Dot\nversion: "<provided-version>"\n\n# Adaptor configuration\nadaptor:\n  image:\n    repository: <Either your repository, or the repository provided by Halo Dot>\n    pullPolicy: Always\n  \n  # High availability configuration\n  replicaCount: 3\n  namespace: halo\n  \n  # Logging configuration\n  jsonLogs: true  # Required for log aggregation\n  logLevel: "LogInfo"  # Use LogDebug only in non-production\n  \n  # The Adaptor will auto-generate this if not provided\n  # jwtSigningSecret: "<auto-generated>"\n  \n  # Service configuration\n  service:\n    listeningPort: 443\n    targetPort: 9000\n  \n  # TLS Configuration\n  tls:\n    enabled: true\n    cert: |\n      -----BEGIN CERTIFICATE-----\n      <your-tls-certificate>\n      -----END CERTIFICATE-----\n    key: |\n      -----BEGIN ENCRYPTED PRIVATE KEY-----\n      <your-tls-key>\n      -----END ENCRYPTED PRIVATE KEY-----\n    ca: |\n      -----BEGIN CERTIFICATE-----\n      <your-ca-certificate>\n      -----END CERTIFICATE-----\n    passphrase: "<key-passphrase>"  # If key is encrypted\n  \n  # Health monitoring\n  # The readiness probe verifies both service health and A&M server connectivity\n  readinessProbe:\n    enabled: true\n    periodSeconds: 30\n\n# Payment Provider configuration\npaymentProvider:\n  image:\n    repository: <Either your repository, or the repository provided by Halo Dot>\n    pullPolicy: Always\n  \n  replicaCount: 2\n  \n  # Config provided by Halo Dot, based on your payment provider\n  config:\n  \n  service:\n    listeningPort: 80\n    targetPort: 7000 #Provided by Halo Dot, based on your payment provider\n\n# Database configuration\ndatabase:\n  host: "<your-postgres-host>"\n  port: 5432\n  databaseName: "halodot_adaptor"\n  user: "halodot_user"\n  password: "<secure-password>"\n\n# Redis configuration\nredis:\n  host: "<your-redis-host>"\n  port: 6379\n  user: "default"  # or your Redis ACL user\n  password: "<redis-password>"\n\n# AWS configuration\naws:\n  region: "<your-aws-region>"\n  accessKeyId: "<aws-access-key>"\n  secretAccessKey: "<aws-secret-key>"\n\n# Key configuration - Adaptor will auto-create these\nkeys:\n  cmk: "halodot-adaptor-cmk"  # Will be created automatically\n  dbEncryptionKey: "halo-db-encryption"\n  dbIntegrity: "halo-db-integrity"\n  transactionSigning: "halo-transaction-signing"\n\n# Halo Dot A&M service endpoint\nattestation:\n  # Production endpoint provided during onboarding\n  host: "<provided-am-endpoint>"\n\n# Observability (Recommended)\nopenTelemetry:\n  metricsEndpoint: "http://otel-collector.monitoring:4317/v1/metrics"\n  tracesEndpoint: "http://otel-collector.monitoring:4317/v1/traces"\n\n# Private registry authentication\nimageCredentials:\n  enabled: true\n  registry: "<provided-registry>"\n  username: "<provided-username>"\n  password: "<provided-password>"\n  email: "ops@yourcompany.com"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-deploy-the-adaptor",children:"Step 4: Deploy the Adaptor"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dry run to validate configuration"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm install halodot-adaptor halodot/adaptor \\\n  -f values.yaml \\\n  --namespace halo \\\n  --dry-run --debug\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Deploy to your cluster"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm install halodot-adaptor halodot/adaptor \\\n  -f values.yaml \\\n  --namespace halo \\\n  --wait \\\n  --timeout 10m\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monitor deployment progress"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Watch pod creation\nkubectl get pods -n halo -w\n\n# Check events for any issues\nkubectl get events -n halo --sort-by='.lastTimestamp'\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-5-verify-deployment",children:"Step 5: Verify Deployment"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check pod status"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n halo\n"})}),"\n",(0,i.jsxs)(n.p,{children:["All pods should be in ",(0,i.jsx)(n.code,{children:"Running"})," state with readiness probes passing."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify automatic secret creation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check AWS Secrets Manager\naws secretsmanager list-secrets --filters Key=name,Values=halo\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should see the three auto-created secrets."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check KMS key creation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"aws kms list-aliases | grep halodot-adaptor-cmk\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify A&M server connectivity"}),": The Adaptor's readiness probe automatically verifies\nconnectivity to the Halo Dot A&M server. If pods are in ",(0,i.jsx)(n.code,{children:"Ready"})," state, the A&M connection is\nworking correctly."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test health endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward -n halo svc/adaptor 8443:443\n# In another terminal:\ncurl -k https://localhost:8443/healthz\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"post-installation-configuration",children:"Post-Installation Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"run-the-bootstrapping-job",children:"Run the Bootstrapping Job"}),"\n",(0,i.jsxs)(n.p,{children:["Running the boostrapping job is described on the ",(0,i.jsx)(n.a,{href:"./bootstrapping",children:"bootstrapping guide"}),".\nThis will setup the database with the initial config values required for running the adaptor."]}),"\n",(0,i.jsx)(n.h3,{id:"provide-halo-dot-with-your-jwt-issuer-name-and-public-key",children:"Provide Halo Dot with your JWT issuer name and public key"}),"\n",(0,i.jsx)(n.p,{children:"The Halo Dot A&M server uses the JWTs you issue to authenticate requests from your adaptor deployment.\nYou will have to provide Halo Dot with your JWT signing public key."}),"\n",(0,i.jsx)(n.h3,{id:"configure-ingress-for-external-access",children:"Configure Ingress for External Access"}),"\n",(0,i.jsx)(n.p,{children:"Create an ingress resource for SoftPOS devices to reach the Adaptor:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: adaptor-ingress\n  namespace: halo\n  annotations:\n    # Adjust based on your ingress controller\n    nginx.ingress.kubernetes.io/ssl-protocols: "TLSv1.2,TLSv1.3"\n    nginx.ingress.kubernetes.io/ssl-ciphers: "ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384"\n    nginx.ingress.kubernetes.io/proxy-body-size: "10m"\n    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - softpos-api.yourdomain.com\n    secretName: adaptor-tls\n  rules:\n  - host: softpos-api.yourdomain.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: adaptor\n            port:\n              number: 443\n'})}),"\n",(0,i.jsx)(n.h2,{id:"softpos-integration",children:"SoftPOS Integration"}),"\n",(0,i.jsxs)(n.p,{children:["To integrate the HaloDot SDK into your SoftPOS mobile applications, follow the\n",(0,i.jsx)(n.a,{href:"../sdk/sdk-integration-guide",children:"SDK Integration Guide"}),". When configuring the SDK for use\nwith your Adaptor deployment, you'll need to set the following claims:"]}),"\n",(0,i.jsx)(n.h3,{id:"sdk-jwt-configuration",children:"SDK JWT Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Configure the JWT claims in your mobile application:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"aud"})," and ",(0,i.jsx)(n.code,{children:"aud_fingerprint"})]}),": Point to your Adaptor's endpoint (e.g.,\n",(0,i.jsx)(n.code,{children:"softpos-api.yourdomain.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"x-am-endpoint"})," and ",(0,i.jsx)(n.code,{children:"x-am-endpoint-fingerprints"})]}),": Set to the HaloDot A&M service endpoint\nprovided during onboarding"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"initial-deployment-issues",children:"Initial Deployment Issues"}),"\n",(0,i.jsx)(n.h4,{id:"adaptor-fails-to-start",children:"Adaptor Fails to Start"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check logs"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n halo -l app=adaptor --tail=100\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common issues"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Failed to create KMS key"'}),": Check AWS IAM permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Database connection failed"'}),": Verify PostgreSQL connectivity and credentials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Redis connection refused"'}),": Check Redis host and authentication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Cannot reach A&M service"'}),": Verify network egress and endpoint URL"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"secret-creation-failures",children:"Secret Creation Failures"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify AWS credentials"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n halo deploy/adaptor -- aws sts get-caller-identity\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check KMS key creation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl exec -n halo deploy/adaptor -- aws kms describe-key --key-id alias/halodot-adaptor-cmk\n"})}),"\n",(0,i.jsx)(n.h4,{id:"readiness-probe-failures",children:"Readiness Probe Failures"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Pods remain in ",(0,i.jsx)(n.code,{children:"Not Ready"})," state"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n halo -l app=adaptor | grep -i health\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cannot reach A&M server (most common)"}),"\n",(0,i.jsx)(n.li,{children:"Incorrect A&M endpoint URL"}),"\n",(0,i.jsx)(n.li,{children:"Network policy blocking egress to A&M service"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify A&M connectivity specifically"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check if the configured A&M endpoint is reachable\nkubectl exec -n halo deploy/adaptor -- nslookup <am-endpoint-domain>\nkubectl exec -n halo deploy/adaptor -- curl -v <am-endpoint>/healthz\n"})}),"\n",(0,i.jsx)(n.h2,{id:"maintenance",children:"Maintenance"}),"\n",(0,i.jsx)(n.h3,{id:"upgrade-process",children:"Upgrade Process"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check for updates"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm repo update\nhelm search repo halodot/adaptor --versions\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Review changelog"})," and update ",(0,i.jsx)(n.code,{children:"values.yaml"})," if needed"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Perform rolling upgrade"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade halodot-adaptor halodot/adaptor \\\n  -f values.yaml \\\n  --namespace halo \\\n  --wait\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,i.jsx)(n.p,{children:"For support:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Collect diagnostic information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get all -n halo\nkubectl describe pods -n halo\nkubectl logs -n halo --tail=1000 > halo-logs.txt\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Helm values (sanitized)"}),"\n",(0,i.jsx)(n.li,{children:"Error messages"}),"\n",(0,i.jsx)(n.li,{children:"Transaction IDs for specific issues"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Contact Halo Dot support with your issuer name and diagnostic bundle"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"helm-values",children:"Helm values"}),"\n",(0,i.jsx)(n.p,{children:"The following table lists the configurable parameters and their default values."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Key"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.image.pullPolicy"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"Always"'})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.image.repository"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Image repository for the adaptor image, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.image.tag"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Tag for the adaptor image, this overrides the version setting"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.jsonLogs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"JSON formatted logs, should be set to true when using logging tooling such as Grafana Loki or ELK. Can be useful to turn off when testing locally"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.jwtSigningSecret"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"HS256 Secret used for issuing tokens for admin users, if not set a random value will be generated"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.logLevel"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"LogInfo"'})}),(0,i.jsx)(n.td,{children:"Logging level for the adaptor. Choices are LogDebug, LogInfo, LogWarn and LogError LogDebug provides full logging, including requests, responses and all card details LogInfo provides some logging, useful for investigating the state of the system without leaking card data Should be set to LogInfo in production and LogDebug in nonprod"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"adaptor"'})}),(0,i.jsx)(n.td,{children:"Name of the adaptor deployment and service"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.namespace"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"halo"'})}),(0,i.jsx)(n.td,{children:"K8s namespace to deploy the adaptor into"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.readinessProbe"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"enabled":true,"periodSeconds":30}'})}),(0,i.jsx)(n.td,{children:"Readiness probe settings for adaptor, the adaptor readiness probe checks that the service is up,  as well as checking that the A&M server is up and reachable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.readinessProbe.enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Enable the readiness probe, you might want to disable this if you are testing without  access to the A&M server"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.readinessProbe.periodSeconds"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"30"})}),(0,i.jsx)(n.td,{children:"How often to run the readiness probe"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.replicaCount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1"})}),(0,i.jsx)(n.td,{children:"Replica count of the adaptor, you should probably set this to your at least your node count"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.resources"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"limits":{"cpu":"500m","memory":"1G"},"requests":{"cpu":"100m","memory":"1G"}}'})}),(0,i.jsx)(n.td,{children:"Resource limits and requests, these values can be tuned based on your volumes, it is recommended to set memory limits and requests to the same value"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.service.listeningPort"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"80"})}),(0,i.jsx)(n.td,{children:"Port that the adaptor service exposes, if HTTPS is enabled, this should be set to 443"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.service.targetPort"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"9000"})}),(0,i.jsx)(n.td,{children:"Port the adaptor listens on"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.tls.ca"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"-----BEGIN CERTIFICATE-----\\nca data\\n-----END CERTIFICATE-----\\n"'})}),(0,i.jsx)(n.td,{children:"The TLS server CA"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.tls.cert"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"-----BEGIN CERTIFICATE-----\\ncert data\\n-----END CERTIFICATE-----\\n"'})}),(0,i.jsx)(n.td,{children:"The TLS server certificate"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.tls.enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Whether to enable TLS on the adaptor"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.tls.key"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"-----BEGIN ENCRYPTED PRIVATE KEY-----\\nkey data\\n-----END ENCRYPTED PRIVATE KEY-----\\n"'})}),(0,i.jsx)(n.td,{children:"The TLS server key, sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"adaptor.tls.passphrase"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Optional passphrase for encrypting the TLS key, sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"attestation.host"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"https://kernelserver.qa.haloplus.io"'})}),(0,i.jsx)(n.td,{children:"Remote attestation hostname, for non prod you can use the QA endpoint set here, for production you will be provided with a URL specifically for you, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws.accessKeyId"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Access key ID for your AWS IAM user, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws.region"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"us-west-2"'})}),(0,i.jsx)(n.td,{children:"AWS region, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws.secretAccessKey"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Secret access key for your AWS IAM user, required and sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"database.databaseName"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"PostgreSQL database name, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"database.host"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"PostgreSQL database hostname, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"database.password"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"PostgreSQL database password, required and sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"database.port"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"5432"})}),(0,i.jsx)(n.td,{children:"PostgreSQL database port"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"database.user"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"PostgreSQL database user, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"imageCredentials.email"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"someone@host.com"'})}),(0,i.jsx)(n.td,{children:"Sets the email address for logging into the private registry"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"imageCredentials.enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Enables using private registries with authentication"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"imageCredentials.password"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"sillyness"'})}),(0,i.jsx)(n.td,{children:"Sets the password for logging into the private registry, sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"imageCredentials.registry"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"quay.io"'})}),(0,i.jsx)(n.td,{children:"Sets the URL for the private registry to login to"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"imageCredentials.username"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"someone"'})}),(0,i.jsx)(n.td,{children:"Sets the username for logging into the private registry"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"keys.cmk"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"haloCmk"'})}),(0,i.jsx)(n.td,{children:"KMS CMK used to encrypt the Secrets manager secrets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"keys.dbEncryptionKey"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"haloDbEncryption"'})}),(0,i.jsx)(n.td,{children:"Secrets manager secret name for DB encryption secret"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"keys.dbIntegrity"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"haloDbIntegrity"'})}),(0,i.jsx)(n.td,{children:"Secrets manager secret name for DB integrity secret"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"keys.transactionSigning"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"haloTransactionSigning"'})}),(0,i.jsx)(n.td,{children:"Secrets manager secret name for transaction signing secret"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"openTelemetry.metricsEndpoint"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"http://otel-collector:4317/v1/metrics"'})}),(0,i.jsx)(n.td,{children:"Opentelemetry metrics endpoint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"openTelemetry.tracesEndpoint"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"http://otel-collector:4317/v1/traces"'})}),(0,i.jsx)(n.td,{children:"Opentelemetry traces endpoint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.config"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Config for the paymentprovider, this is specific per payment provider and will be provided, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.image.pullPolicy"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"Always"'})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.image.repository"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Image repository for the paymentprovider image"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.image.tag"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Tag for the paymentprovider image, this overrides the version setting"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"paymentprovider"'})}),(0,i.jsx)(n.td,{children:"Name of the paymentprovider deployment and service"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.readinessProbe.enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Enables the readiness probe for the payment provider"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.readinessProbe.periodSeconds"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"30"})}),(0,i.jsx)(n.td,{children:"The frequency of readiness probes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.replicaCount"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1"})}),(0,i.jsx)(n.td,{children:"Replica count of the payment provider, should probably be set to at least node count"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.resources"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"limits":{"cpu":"500m","memory":"256Mi"},"requests":{"cpu":"100m","memory":"256Mi"}}'})}),(0,i.jsx)(n.td,{children:"Resource limits and requests, these values can be tuned based on your volumes, it is recommended to set memory limits and requests to the same value"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.service.listeningPort"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"80"})}),(0,i.jsx)(n.td,{children:"kThe port the paymentprovider service exposes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"paymentProvider.service.targetPort"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"The port the paymentprovider listens on, this will be provided along with the config for the paymentprovider"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redis"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"host":null,"password":null,"port":6379,"user":"redis"}'})}),(0,i.jsx)(n.td,{children:"Connection information for Redis"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redis.host"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Redis hostname, if Redis is deployed in cluster using  the Redis helm chart this should be set to redis-master.default.svc.cluster.local, required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redis.password"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nil"})}),(0,i.jsx)(n.td,{children:"Redis password, required and sensitive"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redis.port"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"6379"})}),(0,i.jsx)(n.td,{children:"Redis port"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redis.user"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"redis"'})}),(0,i.jsx)(n.td,{children:"Redis user"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scheduledJobs.voids"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"cron":"*/30 * * * *","enabled":true,"maxRetries":10,"runAtStartup":false}'})}),(0,i.jsx)(n.td,{children:"Job for voiding failed transaction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scheduledJobs.voids.cron"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"*/30 * * * *"'})}),(0,i.jsx)(n.td,{children:"How often the void job should run"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scheduledJobs.voids.enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Sets whether voiding failed transactions should run"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scheduledJobs.voids.maxRetries"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"10"})}),(0,i.jsx)(n.td,{children:"How often many times a failed transaction should try be voided before giving up"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scheduledJobs.voids.runAtStartup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Whether the void job should run when the adaptor starts up"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"version"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"latest"'})}),(0,i.jsx)(n.td,{children:"Container image tag for adaptor and payment provider, required"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);